{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/CritterFactory.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./src/lib/Gene.js","webpack:///./src/Worker.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./src/lib/Helpers.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./src/lib/Achievement.js","webpack:///./src/lib/Controller.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./src/lib/GeneFactory.js","webpack:///./src/lib/Trait.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./src/lib/GeneHelper.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./src/lib/Critter.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","0Yid","e","u","_Helpers","CritterFactory","id","generation","gender","Critter","mother","father","state","Math","max","CoinFlip","GENDER_FEMALE","GENDER_MALE","child","_loop","motherTrait","traits","fatherTrait","minTraitVal","min","base","StatVariance","maxTraitVal","RandomInRange","Trait","MAX_VALUE","parentGenes","genes","concat","parentGeneData","geneId","forEach","gene","push","motherGene","fatherGene","expression","GeneHelper","calculateExpression","Gene","EXPRESSION_NONE","newGene","GeneFactory","getGene","EXPRESSION_DOMINANT","calculateValue","geneMax","traitId","length","newGeneChanceRange","newGeneChance","unlockedGenes","developedGenes","reduce","acc","trait","nextGeneId","find","getRandomGeneExcluding","geneValue","geneCount","shouldMutate","EXPRESSION_RECESSIVE","critterState","critter","rank","map","currentHealth","aFunction","fn","that","a","b","apply","arguments","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","P","Attributes","TypeError","isObject","it","global","window","self","Function","__g","data","_classCallCheck3","this","controller","Controller","onmessage","msg","location","type","address","critters","fromState","changes","checkTick","Date","getTime","postMessage","ticksPerSecond","SmartRound","round","random","floor","Shuffle","array","S","val","toString","valueOf","Hsns","document","is","createElement","exec","NegM","createDesc","$Object","desc","$export","F","V7oC","obj","_defineProperty2","defineProperties","target","props","descriptor","configurable","writable","Constructor","protoProps","staticProps","WEpk","core","version","__e","ctx","hide","source","own","out","IS_FORCED","IS_GLOBAL","G","IS_STATIC","IS_PROTO","IS_BIND","B","IS_WRAP","W","expProto","C","virtual","R","U","Achievement","_this","typeId","checkFn","currLevel","achievements","achievement","TYPE_VITALITY","royalHatchery","female","male","worker","mine","farm","carry","factory","ID_VITALITY","TYPE_STRENGTH","ID_STRENGTH","TYPE_AGILITY","ID_AGILITY","TYPE_BITE","ID_BITE","TYPE_STING","ID_STING","TYPE_MUTATION","mutations","TYPE_SCORE","store","score","TYPE_GENERATION","TYPE_CRITTERS","totalCritters","TYPE_DIRT","dirtPerSecond","TYPE_GRASS","grassPerSecond","TYPE_SOD","sodPerSecond","level","curr","TYPE_BATTLES","TYPE_MINES","TYPE_FARMS","TYPE_EQUIPMENT","TYPE_FACTORIES","TYPE_ENEMY_GENES","TYPE_HIGH_GROUND","TYPE_BOOST_UPGRADES","TYPE_FORTS","TYPE_MAP","timeBetweenTicks","lastTick","timeBetweenSaves","lastSave","timeBetweenAchievementChecks","lastAchievementCheck","currentBoosts","boosts","maxBoosts","breed","sodProduction","mineMound","farmMound","carryMound","factoryMound","dirtPerSecondRaw","productionPerSecondRaw","grassPerSecondRaw","carryPerSecondRaw","sodPerSecondRaw","dirtStored","grassStored","carryPerTickRaw","removedDirt","removedGrass","factoryDirt","factoryDirtStored","factoryGrass","factoryGrassStored","sodPerTickRaw","lowestResourceStored","removedResources","dirtCarriedPerSecond","grassCarriedPerSecond","addSod","queen","king","soldiers","army","maxHealth","actionTime","progress","mound","sort","sortBy","size","pop","produceSod","timestamp","populate","tick","check","parseInt","excludeIds","availableGenes","filter","availableGene","indexOf","baseValue","NAMES","bonus","totalGeneValue","calculatedValue","instance","jK9G","bequeatherExpression","otherParentExpression","sum","motherVal","fatherVal","lowerVal","higherVal","bitmap","RANK_RECRUIT","pow","log","LN2","rawBaseValue","rawGeneValue","RANK_ROYAL","RANK_WORKER","RANK_ARMY"],"mappings":"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","file":"6773d7a5571b6f84d416.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"9+L5\");\n","import {CoinFlip, RandomInRange, StatVariance} from \"./Helpers\";\nimport Critter from \"./Critter\";\nimport Trait from \"./Trait\";\nimport GeneFactory from \"./GeneFactory\";\nimport GeneHelper from \"./GeneHelper\";\nimport Gene from './Gene';\n\nclass CritterFactory {\n    static GeneHelper = GeneHelper;\n    static GeneFactory = GeneFactory;\n    static geneMax = 100;\n    static newGeneChanceRange = 1e3;\n    static RandomInRange = RandomInRange;\n\n    static default(id, generation, gender) {\n        return new Critter(id, generation, gender)\n    }\n\n    static breed(id, mother, father, state) {\n        const generation = Math.max(mother.generation, father.generation) + 1;\n        const gender = CoinFlip() ? Critter.GENDER_FEMALE : Critter.GENDER_MALE;\n        const child = new Critter(id, generation, gender);\n\n        // iterate through traits, calculate base values & mutations for child\n        for (let i = 0; i < mother.traits.length; i++) {\n            const motherTrait = mother.traits[i];\n            const fatherTrait = father.traits[i];\n\n            // calc base value for trait\n            let minTraitVal = Math.min(motherTrait.base, fatherTrait.base);\n            minTraitVal = minTraitVal - StatVariance(minTraitVal);\n            let maxTraitVal = Math.max(motherTrait.base, fatherTrait.base);\n            maxTraitVal = maxTraitVal + StatVariance(maxTraitVal);\n            child.traits[i].base = RandomInRange(minTraitVal, Math.min(maxTraitVal, Trait.MAX_VALUE));\n\n            // handle for gene mutation:\n            const parentGenes = motherTrait.genes.concat(fatherTrait.genes);\n            const parentGeneData = {};\n\n            parentGenes.forEach(gene => {\n                if (parentGeneData.hasOwnProperty(gene.id)) {\n                    parentGeneData[gene.id].push(gene)\n                } else {\n                    parentGeneData[gene.id] = [gene]\n                }\n            });\n\n            // add gene to child trait for each geneId collected during traversing parents genes\n            for (let geneId in parentGeneData) {\n                if(parentGeneData.hasOwnProperty(geneId)) {\n                    const motherGene = parentGeneData[geneId][0];\n                    const fatherGene = parentGeneData[geneId][1];\n\n                    let expression = CritterFactory.GeneHelper.calculateExpression(motherGene.expression, fatherGene ? fatherGene.expression : 0);\n                    // only genes with expression over 0 will be added\n                    if (expression > Gene.EXPRESSION_NONE) {\n                        let newGene = GeneFactory.getGene(geneId);\n                        // default value is 0\n                        newGene.value = 0;\n                        newGene.expression = expression;\n\n                        // if both parents have the gene && expression is dominant, calculate value from parent value\n                        if (fatherGene && expression === Gene.EXPRESSION_DOMINANT) {\n                            newGene.value = Math.min(CritterFactory.GeneHelper.calculateValue(motherGene.value, fatherGene.value), CritterFactory.geneMax);\n                        }\n\n                        child.traits[newGene.traitId].genes.push(newGene);\n                    }\n                }\n            }\n        }\n\n        // chance for new gene to randomly develop\n        const randVal = CritterFactory.RandomInRange(1, CritterFactory.newGeneChanceRange);\n        if (randVal <= state.newGeneChance) {\n            state.newGeneChance = 0;\n            const unlockedGenes = state.unlockedGenes;\n            const developedGenes = child.traits.reduce((acc, trait) => {\n\n                return acc.concat(trait.genes)\n            }, []);\n\n            let nextGeneId = unlockedGenes.find(geneId => !developedGenes.find(gene => gene.id === geneId));\n            // discover new gene\n            let newGene;\n            if (nextGeneId) {\n                newGene = CritterFactory.GeneFactory.getGene(nextGeneId);\n            } else {\n                newGene = CritterFactory.GeneFactory.getRandomGeneExcluding(unlockedGenes);\n            }\n\n            const base = child.traits[newGene.traitId].base;\n            const geneValue = child.traits[newGene.traitId].geneValue;\n            const geneCount = child.traits[newGene.traitId].genes.length+1;\n            if (base > 25 && CritterFactory.GeneHelper.shouldMutate(geneCount, geneValue)) {\n                newGene.expression = Gene.EXPRESSION_RECESSIVE;\n                newGene.value = 0;\n                child.traits[newGene.traitId].genes.push(newGene);\n                state.unlockedGenes.push(newGene.id);\n            }\n        } else {\n            state.newGeneChance = state.newGeneChance + 1;\n        }\n        return child\n    }\n\n    static fromState(critterState) {\n        const critter = new Critter(critterState.id, critterState.generation, critterState.gender);\n        critter.rank = critterState.rank;\n        critter.traits = critterState.traits.map(trait => new Trait(trait.name, trait.base));\n        critter.currentHealth = critterState.currentHealth || 0;\n        return critter;\n    }\n}\n\nexport default CritterFactory;","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","class Gene {\n    constructor(data) {\n        this.id = data.id;\n        this.traitId = data.traitId;\n        this.name = data.name;\n        this.value = 0;\n        this.expression = Gene.EXPRESSION_NONE;\n    }\n}\nGene.EXPRESSION_DOMINANT = 2;\nGene.EXPRESSION_RECESSIVE = 1;\nGene.EXPRESSION_NONE = 0;\n\nmodule.exports = Gene;","import Controller from './lib/Controller';\nlet state;\nconst controller = new Controller();\nimport CritterFactory from './lib/CritterFactory';\n\n// Respond to message from parent thread\nonmessage = (msg) => {\n  state = msg.data;\n    const mounds = [{\n      location: 'royalHatchery',\n      type: 'mother'\n    }, {\n      location: 'royalHatchery',\n      type: 'father'\n    }, {\n      location: 'royalHatchery',\n      type: 'female'\n    }, {\n      location: 'royalHatchery',\n      type: 'male'\n    }, {\n      location: 'worker',\n      type: 'mine'\n    }, {\n      location: 'worker',\n      type: 'farm'\n    }, {\n      location: 'worker',\n      type: 'carry'\n    }, {\n      location: 'worker',\n      type: 'factory'\n    }];\n\n    mounds.forEach(address => {\n      const critters = state[address.location][address.type].critters;\n      state[address.location][address.type].critters = critters.map(critter => CritterFactory.fromState(critter))\n    });\n\n  const changes = controller.checkTick(new Date().getTime(), state);\n  postMessage(changes);\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","const ticksPerSecond = 20;\nconst SmartRound = (value) => {\n  return value < 100 ? Math.round(value * 10) / 10 : Math.round(value);\n};\nconst CoinFlip = () => {\n  return Math.random() < .5 ? true : false;\n};\nconst StatVariance = (value) => {\n  return value<1e3 ? Math.floor(value/50)+1 : 20\n};\nconst RandomInRange = (min , max) => {\n  return Math.floor(Math.random()*(max-min+1))+min\n};\nconst Shuffle = (array) => {\n  let r;\n  let i;\n  for(let t = array.length -1; t >= 0; t--) {\n    i = Math.floor(Math.random()*t);\n    r = array[t];\n    array[t] = array[i];\n    array[i] = r;\n  }\n  return array\n};\n\nexport {\n  ticksPerSecond,\n  SmartRound,\n  CoinFlip,\n  StatVariance,\n  RandomInRange,\n  Shuffle\n}\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","var core = module.exports = { version: '2.5.3' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","import achievements from './achievements.json';\nimport Trait from './Trait';\n\nclass Achievement {\n  static check(state, changes) {\n    for (let typeId = this.TYPE_VITALITY; typeId < state.achievements.length; typeId++) {\n      let checkFn;\n      const currLevel = state.achievements[typeId];\n      const achievement = achievements[typeId][currLevel];\n\n      switch(typeId) {\n        case this.TYPE_VITALITY:\n          checkFn = (state) => {\n            const allCritters = state.royalHatchery.mother.critters\n             .concat(state.royalHatchery.father.critters)\n             .concat(state.royalHatchery.female.critters)\n             .concat(state.royalHatchery.male.critters)\n             .concat(state.worker.mine.critters)\n             .concat(state.worker.farm.critters)\n             .concat(state.worker.carry.critters)\n             .concat(state.worker.factory.critters);\n            return allCritters.find(critter => critter.traits[Trait.ID_VITALITY].value >= achievement.value)\n          };\n         break;\n        case this.TYPE_STRENGTH:\n          checkFn = (state) => {\n            const allCritters = state.royalHatchery.mother.critters\n              .concat(state.royalHatchery.father.critters)\n              .concat(state.royalHatchery.female.critters)\n              .concat(state.royalHatchery.male.critters)\n              .concat(state.worker.mine.critters)\n              .concat(state.worker.farm.critters)\n              .concat(state.worker.carry.critters)\n              .concat(state.worker.factory.critters);\n            return allCritters.find(critter => critter.traits[Trait.ID_STRENGTH].value >= achievement.value)\n          };\n          break;\n        case this.TYPE_AGILITY:\n          checkFn = (state) => {\n            const allCritters = state.royalHatchery.mother.critters\n              .concat(state.royalHatchery.father.critters)\n              .concat(state.royalHatchery.female.critters)\n              .concat(state.royalHatchery.male.critters)\n              .concat(state.worker.mine.critters)\n              .concat(state.worker.farm.critters)\n              .concat(state.worker.carry.critters)\n              .concat(state.worker.factory.critters);\n            return allCritters.find(critter => critter.traits[Trait.ID_AGILITY].value >= achievement.value)\n          };\n          break;\n        case this.TYPE_BITE:\n          checkFn = (state) => {\n            const allCritters = state.royalHatchery.mother.critters\n              .concat(state.royalHatchery.father.critters)\n              .concat(state.royalHatchery.female.critters)\n              .concat(state.royalHatchery.male.critters)\n              .concat(state.worker.mine.critters)\n              .concat(state.worker.farm.critters)\n              .concat(state.worker.carry.critters)\n              .concat(state.worker.factory.critters);\n            return allCritters.find(critter => critter.traits[Trait.ID_BITE].value >= achievement.value)\n          };\n          break;\n        case this.TYPE_STING:\n          checkFn = (state) => {\n            const allCritters = state.royalHatchery.mother.critters\n              .concat(state.royalHatchery.father.critters)\n              .concat(state.royalHatchery.female.critters)\n              .concat(state.royalHatchery.male.critters)\n              .concat(state.worker.mine.critters)\n              .concat(state.worker.farm.critters)\n              .concat(state.worker.carry.critters)\n              .concat(state.worker.factory.critters);\n            return allCritters.find(critter => critter.traits[Trait.ID_STING].value >= achievement.value)\n          };\n          break;\n        case this.TYPE_MUTATION:\n          checkFn = (state) => {\n            const allCritters = state.royalHatchery.mother.critters\n              .concat(state.royalHatchery.father.critters)\n              .concat(state.royalHatchery.female.critters)\n              .concat(state.royalHatchery.male.critters)\n              .concat(state.worker.mine.critters)\n              .concat(state.worker.farm.critters)\n              .concat(state.worker.carry.critters)\n              .concat(state.worker.factory.critters);\n            return allCritters.find(critter => critter.mutations >= achievement.value)\n          };\n          break;\n        case this.TYPE_SCORE:\n          checkFn = (store) => {\n            const allCritters = state.royalHatchery.mother.critters\n              .concat(state.royalHatchery.father.critters)\n              .concat(state.royalHatchery.female.critters)\n              .concat(state.royalHatchery.male.critters)\n              .concat(state.worker.mine.critters)\n              .concat(state.worker.farm.critters)\n              .concat(state.worker.carry.critters)\n              .concat(state.worker.factory.critters);\n            return allCritters.find(critter => critter.score >= achievement.value)\n          };\n          break;\n        case this.TYPE_GENERATION:\n          checkFn = (store) => {\n            const allCritters = state.royalHatchery.mother.critters\n              .concat(state.royalHatchery.father.critters)\n              .concat(state.royalHatchery.female.critters)\n              .concat(state.royalHatchery.male.critters)\n              .concat(state.worker.mine.critters)\n              .concat(state.worker.farm.critters)\n              .concat(state.worker.carry.critters)\n              .concat(state.worker.factory.critters);\n            return allCritters.find(critter => critter.generation >= achievement.value)\n          };\n          break;\n        case this.TYPE_CRITTERS:\n          checkFn = (store) => {\n            return store.totalCritters >= achievement.value;\n          };\n          break;\n        case this.TYPE_DIRT:\n          checkFn = (store) => {\n            return store.worker.dirtPerSecond >= achievement.value;\n          };\n          break;\n        case this.TYPE_GRASS:\n          checkFn = (store) => {\n            return store.worker.grassPerSecond >= achievement.value;\n          };\n          break;\n        case this.TYPE_SOD:\n          checkFn = (store) => {\n            return store.worker.sodPerSecond >= achievement.value;\n          };\n          break;\n        default:\n          checkFn = () => false;\n      }\n\n      if (checkFn(state)) {\n        changes.achievements[achievement.typeId] = achievement.level+1;\n      }\n    }\n  }\n\n  static allAchievements() {\n    return achievements.reduce((acc, curr) => {\n      return acc.concat(curr)\n    }, [])\n  }\n}\n\nAchievement.TYPE_VITALITY = 0;\nAchievement.TYPE_STRENGTH = 1;\nAchievement.TYPE_AGILITY = 2;\nAchievement.TYPE_BITE = 3;\nAchievement.TYPE_STING = 4;\nAchievement.TYPE_MUTATION = 5;\nAchievement.TYPE_SCORE = 6;\nAchievement.TYPE_GENERATION = 7;\nAchievement.TYPE_CRITTERS = 8;\nAchievement.TYPE_DIRT = 9;\nAchievement.TYPE_GRASS = 10;\nAchievement.TYPE_SOD = 11;\nAchievement.TYPE_BATTLES = 12;\nAchievement.TYPE_MINES = 13;\nAchievement.TYPE_FARMS = 14;\nAchievement.TYPE_EQUIPMENT = 15;\nAchievement.TYPE_FACTORIES = 16;\nAchievement.TYPE_ENEMY_GENES = 17;\nAchievement.TYPE_HIGH_GROUND = 18;\nAchievement.TYPE_BOOST_UPGRADES = 19;\nAchievement.TYPE_FORTS = 20;\nAchievement.TYPE_MAP = 21;\n\nexport default Achievement;\n","import { ticksPerSecond } from './Helpers';\nimport Achievement from './Achievement';\nimport CritterFactory from '../lib/CritterFactory';\n\nclass Controller {\n  constructor() {\n    this.timeBetweenTicks = 1000 / ticksPerSecond;\n    this.lastTick = null;\n    this.timeBetweenSaves = 5 * 60 * 1000;\n    this.lastSave = null;\n    this.timeBetweenAchievementChecks = 1000;\n    this.lastAchievementCheck = null;\n  }\n\n  breed(state, location) {\n    const currentBoosts = state[location].boosts;\n    const totalBoosts = state[location].maxBoosts;\n    if (currentBoosts < totalBoosts) {\n      state[location].boosts = Math.round((currentBoosts+.1)*10)/10;\n    }\n\n    const id = state.totalCritters + 1;\n    const mother = state[location].mother.critters[0];\n    const father = state[location].father.critters[0];\n    mother.currentHealth = 0;\n    father.currentHealth = 0;\n    return CritterFactory.breed(id, mother, father, state);\n  }\n\n  produceSod(state, changes) {\n    const sodProduction = state.worker;\n    const mineMound = sodProduction.mine;\n    const farmMound = sodProduction.farm;\n    const carryMound = sodProduction.carry;\n    const factoryMound = sodProduction.factory;\n\n    const dirtPerSecondRaw = mineMound.productionPerSecondRaw;\n    const grassPerSecondRaw = farmMound.productionPerSecondRaw;\n    const carryPerSecondRaw = carryMound.productionPerSecondRaw;\n    const sodPerSecondRaw = factoryMound.productionPerSecondRaw;\n\n    let dirtStored = sodProduction.dirtStored + dirtPerSecondRaw/ticksPerSecond;\n    let grassStored = sodProduction.grassStored + grassPerSecondRaw/ticksPerSecond;\n    const carryPerTickRaw = carryPerSecondRaw/ticksPerSecond;\n    const removedDirt = Math.min(dirtStored, carryPerTickRaw);\n    const removedGrass = Math.min(grassStored, carryPerTickRaw);\n    dirtStored = dirtStored - removedDirt;\n    grassStored = grassStored - removedGrass;\n\n    let factoryDirt = sodProduction.factoryDirtStored + removedDirt;\n    let factoryGrass = sodProduction.factoryGrassStored + removedGrass;\n\n    const sodPerTickRaw = sodPerSecondRaw/ticksPerSecond;\n    const lowestResourceStored = Math.min(factoryDirt, factoryGrass);\n    const removedResources = Math.min(lowestResourceStored, sodPerTickRaw);\n    factoryDirt = factoryDirt - removedResources;\n    factoryGrass = factoryGrass - removedResources;\n\n    changes.sodProduction.dirtPerSecond = dirtPerSecondRaw - removedDirt*ticksPerSecond;\n    changes.sodProduction.grassPerSecond = grassPerSecondRaw - removedGrass*ticksPerSecond;\n    changes.sodProduction.dirtStored = dirtStored;\n    changes.sodProduction.grassStored = grassStored;\n    changes.sodProduction.dirtCarriedPerSecond = removedDirt * ticksPerSecond - removedResources * ticksPerSecond;\n    changes.sodProduction.grassCarriedPerSecond = removedGrass * ticksPerSecond - removedResources * ticksPerSecond;\n    changes.sodProduction.factoryDirtStored = factoryDirt;\n    changes.sodProduction.factoryGrassStored = factoryGrass;\n    changes.sodProduction.sodPerSecond = removedResources * ticksPerSecond;\n    changes.addSod = removedResources\n  }\n\n  tick(state, changes) {\n    const location = 'royalHatchery';\n    const queen = state[location].mother.critters[0];\n    const king = state[location].father.critters[0];\n\n    const crittersToHeal = state.royalHatchery.mother.critters\n      .concat(state.royalHatchery.father.critters)\n      .concat(state.soldiers.army.critters);\n\n    crittersToHeal.forEach(critter => {\n      critter.currentHealth = critter.currentHealth + critter.maxHealth / critter.actionTime;\n      changes.critters.push(critter)\n    });\n\n    const allWorkers = state.worker.mine.critters\n      .concat(state.worker.farm.critters)\n      .concat(state.worker.carry.critters)\n      .concat(state.worker.factory.critters);\n\n    allWorkers.forEach(critter => {\n      critter.currentHealth = critter.currentHealth + critter.maxHealth / critter.actionTime;\n      if (critter.progress >= 100) {\n        critter.currentHealth = 0;\n        changes.critters.push(critter)\n      }\n    });\n\n    if (queen.progress >= 100 && king.progress >= 100) {\n      const child = this.breed(state, location);\n\n      const mound = state[location][child.gender];\n      mound.critters.push(child);\n      mound.critters.sort((a, b) => b[mound.sortBy] - a[mound.sortBy]);\n      if (mound.critters.length > mound.size) {\n        mound.critters.pop()\n      }\n    }\n\n    changes.critters = changes.critters\n      .concat(state.royalHatchery.female.critters)\n      .concat(state.royalHatchery.male.critters);\n\n    this.produceSod(state, changes);\n  }\n\n  save() {\n\n  }\n\n  populate(state) {\n    const mounds = [{\n      location: 'royalHatchery',\n      type: 'mother'\n    }, {\n      location: 'royalHatchery',\n      type: 'father'\n    }, {\n      location: 'royalHatchery',\n      type: 'female'\n    }, {\n      location: 'royalHatchery',\n      type: 'male'\n    }, {\n      location: 'worker',\n      type: 'mine'\n    }, {\n      location: 'worker',\n      type: 'farm'\n    }, {\n      location: 'worker',\n      type: 'carry'\n    }, {\n      location: 'worker',\n      type: 'factory'\n    }, {\n      location: 'soldiers',\n      type: 'army'\n    }];\n\n    mounds.forEach(address => {\n      const critters = state[address.location][address.type].critters;\n      state[address.location][address.type].critters = critters.map(critter => CritterFactory.fromState(critter))\n    });\n\n    return state;\n  }\n\n  checkTick(timestamp, state) {\n    state = this.populate(state);\n    const changes = {\n      critters: [],\n      sodProduction: {},\n      addSod: 0,\n      achievements: state.achievements\n    };\n\n    if (!this.lastTick) this.lastTick = timestamp;\n    const timeSinceLastTick = timestamp - this.lastTick;\n    if (timeSinceLastTick >= this.timeBetweenTicks) {\n      this.lastTick = timestamp;\n      this.tick(state, changes);\n    }\n    // if (!this.lastSave) this.lastSave = timestamp;\n    // const timeSinceLastSave = timestamp - this.lastSave;\n    // if (timeSinceLastSave >= this.timeBetweenSaves) {\n    //   this.lastSave = timestamp;\n    //   this.save();\n    // }\n    if (!this.lastAchievementCheck) this.lastAchievementCheck = timestamp;\n    const timeSinceLastAchievementCheck = timestamp - this.lastAchievementCheck;\n    if(timeSinceLastAchievementCheck >= this.timeBetweenAchievementChecks) {\n      this.lastAchievementCheck = timestamp;\n      Achievement.check(state, changes)\n    }\n\n    return changes;\n  }\n}\n\nexport default Controller;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","import genes from './genes.json';\nimport Gene from './Gene';\nimport {Shuffle} from './Helpers';\n\nclass GeneFactory {\n  static getGene(id) {\n    id = parseInt(id);\n    return new Gene(genes.find(gene => gene.id === id));\n  }\n\n  static getRandomGeneExcluding(excludeIds) {\n    let availableGenes = genes.filter(availableGene => {\n      return excludeIds.indexOf(availableGene.id) === -1;\n    });\n    availableGenes = Shuffle(availableGenes);\n    return availableGenes[0]\n  }\n}\n\nexport default GeneFactory;\n","import {SmartRound} from './Helpers';\nimport Gene from './Gene';\n\nclass Trait {\n  constructor(id, baseValue) {\n    this.id = parseInt(id);\n    this.name = Trait.NAMES[id];\n    this.base = baseValue;\n    this.genes = [];\n  }\n\n  get geneValue() {\n    let totalGeneValue = this.genes.reduce((acc, gene) => {\n      if (gene.expression === Gene.EXPRESSION_DOMINANT) {\n        acc = acc + gene.value\n      }\n      return acc;\n    }, 0);\n    return Math.round(totalGeneValue);\n  }\n\n  get value() {\n    let calculatedValue = this.base + this.base * (this.geneValue/100);\n\n    return SmartRound(calculatedValue);\n  }\n\n  getTrueValue(bonus) {\n    if (this.id === Trait.ID_BITE || this.id === Trait.ID_STING) {\n      return SmartRound(this.value + bonus);\n    }\n    return this.value;\n  }\n\n  get bonus() {\n    return this.geneValue;\n  }\n}\nTrait.MAX_VALUE = 999999;\nTrait.ID_VITALITY = 0;\nTrait.ID_STRENGTH = 1;\nTrait.ID_AGILITY = 2;\nTrait.ID_BITE = 3;\nTrait.ID_STING = 4;\nTrait.NAMES = ['vitality', 'strength', 'agility', 'bite', 'sting'];\n\nexport default Trait;\n","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","import {CoinFlip, RandomInRange, StatVariance} from \"./Helpers\";\nimport Gene from \"./Gene\";\n\nclass GeneHelper {\n    static calculateExpression(bequeatherExpression, otherParentExpression = 0) {\n        let expression;\n        const sum = bequeatherExpression + otherParentExpression;\n\n        if (2 === sum) {\n            if (bequeatherExpression === otherParentExpression) {\n                expression = CoinFlip()\n                    ? Gene.EXPRESSION_RECESSIVE\n                    : CoinFlip()\n                        ? Gene.EXPRESSION_DOMINANT\n                        : Gene.EXPRESSION_NONE;\n            } else {\n                expression = Gene.EXPRESSION_RECESSIVE;\n            }\n        } else if (3 === sum || 1 === sum) {\n            expression = CoinFlip() ? bequeatherExpression : otherParentExpression;\n        } else if (4 === sum) {\n            expression = Gene.EXPRESSION_DOMINANT;\n        } else {\n            expression = Gene.EXPRESSION_NONE;\n        }\n\n        return expression\n    }\n\n    static shouldMutate(geneCount, geneValue) {\n        if (geneCount >= 10) {\n            return geneValue >= (geneCount-10)*100+450\n        } else {\n            return geneValue >= geneCount*(geneCount-1)*5\n        }\n    }\n\n    static calculateValue(motherVal, fatherVal) {\n        let lowerVal = Math.min(motherVal, fatherVal);\n        let higherVal = Math.max(motherVal, fatherVal);\n        lowerVal = lowerVal-StatVariance(lowerVal);\n        higherVal = higherVal+StatVariance(higherVal);\n\n        return RandomInRange(lowerVal, higherVal);\n    }\n}\n\nexport default GeneHelper;","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","import { ticksPerSecond, SmartRound } from './Helpers';\nimport Trait from './Trait';\n\nclass Critter {\n  constructor(id, generation, gender) {\n    this.id = id;\n    this.generation = generation;\n    this.gender = gender;\n    this.rank = Critter.RANK_RECRUIT;\n    this.traits = [];\n    this.traits.push(new Trait(Trait.ID_VITALITY, 5));\n    this.traits.push(new Trait(Trait.ID_STRENGTH, 5));\n    this.traits.push(new Trait(Trait.ID_AGILITY, 5));\n    this.traits.push(new Trait(Trait.ID_BITE, 5));\n    this.traits.push(new Trait(Trait.ID_STING, 5));\n    this.currentHealth = 0;\n  }\n\n  get score() {\n    let score = this.traits.reduce((acc, trait) => {\n      return acc * trait.value\n    }, 1);\n    return SmartRound(Math.pow(score, .2));\n  }\n\n  get maxHealth() {\n    return SmartRound(this.traits[Trait.ID_VITALITY].value*15);\n  }\n\n  get progress() {\n    let progress = Math.round(this.currentHealth / this.maxHealth * 1e4)/100;\n    if (progress > 100) progress = 100;\n    if (progress < 0) progress = 0;\n    return progress;\n  }\n\n  get actionTime() {\n    let actionTime = 30 * Math.pow(.9, Math.log(this.traits[Trait.ID_AGILITY].value) / Math.LN2) * ticksPerSecond;\n    return Math.max(actionTime, ticksPerSecond*3);\n  }\n\n  get actionTimeSeconds() {\n    return Math.round(this.actionTime/ticksPerSecond*100)/100;\n  }\n\n  get strengthBonus() {\n    return SmartRound(this.traits[Trait.ID_STRENGTH].value/2);\n  }\n\n  get agilityBonus() {\n    return SmartRound(this.traits[Trait.ID_AGILITY].value/2);\n  }\n\n  get dirtPerSecond() {\n    return SmartRound(60/(this.actionTime/ticksPerSecond)*this.traits[Trait.ID_STING].value/60);\n  }\n\n  get grassPerSecond() {\n    return SmartRound(60/(this.actionTime/ticksPerSecond)*this.traits[Trait.ID_BITE].value/60);\n  }\n\n  get carryPerSecond() {\n    return SmartRound(60/(this.actionTime/ticksPerSecond)*this.traits[Trait.ID_STRENGTH].value/60);\n  }\n\n  get sodPerSecond() {\n    return SmartRound(60/(this.actionTime/ticksPerSecond)*this.traits[Trait.ID_VITALITY].value/60);\n  }\n\n  get baseScore() {\n    if (!this.rawBaseValue) {\n      this.rawBaseValue = this.traits.reduce((acc, trait) => acc * trait.base, 1);\n    }\n    return SmartRound(Math.pow(this.rawBaseValue,.2));\n  }\n\n  get bonusScore() {\n    if(!this.rawGeneValue) {\n      this.rawGeneValue = this.traits.reduce((acc, trait) => acc * trait.geneValue, 1);\n    }\n    return SmartRound(Math.pow(this.rawGeneValue,.2));\n  }\n\n  get mutations() {\n    return this.traits.reduce((acc, trait) => acc + trait.genes.length, 0);\n  }\n}\n\nCritter.GENDER_FEMALE = 'female';\nCritter.GENDER_MALE = 'male';\n\nCritter.RANK_RECRUIT = 0;\nCritter.RANK_ROYAL = 1;\nCritter.RANK_WORKER = 2;\nCritter.RANK_ARMY = 3;\n\nexport default Critter;\n"],"sourceRoot":""}